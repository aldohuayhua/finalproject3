{"ast":null,"code":"import _classCallCheck from\"/Users/ziadeldessouky/Desktop/rutgers/homework/finalproject3/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ziadeldessouky/Desktop/rutgers/homework/finalproject3/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/ziadeldessouky/Desktop/rutgers/homework/finalproject3/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/ziadeldessouky/Desktop/rutgers/homework/finalproject3/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/ziadeldessouky/Desktop/rutgers/homework/finalproject3/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import ReactDOM from\"react-dom\";import _ from\"lodash\";import{BrowserRouter,Switch,Route,Link}from\"react-router-dom\";import Typography from\"@material-ui/core/Typography\";import'./App.css';import Home from'./components/Home';import Profile from'./components/Profile';import LoginForm from'./components/LoginForm';import Public from'./components/Public';import{fireAuth}from\"./fireApi\";import withAuthProtection from\"./withAuthProtection\";import API from'../src/utils/API';import SignUpForm from'./components/SignUpForm';import Modal from'react-bootstrap/Modal';import Button from'react-bootstrap/Button';import ButtonToolbar from'react-bootstrap/ButtonToolbar';import Overlay from'react-bootstrap/Overlay';import OverlayTrigger from'react-bootstrap/OverlayTrigger';import Popover from'react-bootstrap/Popover';import Navbar from'react-bootstrap/Navbar';import Nav from'react-bootstrap/Nav';var Wrapper=function Wrapper(props){return React.createElement(\"div\",Object.assign({style:{padding:16,margin:\"auto\"}},props));};var ProtectedProfile=withAuthProtection(\"/login\")(Profile);var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this));_this.isSomeoneSignedIn=function(){if(_this.state.activeUser){return React.createElement(ProtectedProfile,Object.assign({},_this.state.props,{me:_this.state.me,displayName:_this.state.email,id:_this.state.id,activeUser:_this.state.activeUser}));}else{return React.createElement(ProtectedProfile,null);}};_this.handleSignIn=function(history){return function(email,password){return fireAuth.signInWithEmailAndPassword(email,password).then(function(){return history.push(\"/profile\");});};};_this.handleSignUp=function(history){return function(email,password){fireAuth.createUserWithEmailAndPassword(email,password).catch(function(error){// Handle Errors here.\nvar errorCode=error.code;var errorMessage=error.message;// ...\n});return history.push(\"/profile\");};};console.log(\"user\",fireAuth.currentUser);_this.state={me:fireAuth.currentUser,activeUser:{}};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fireAuth.onAuthStateChanged(function(me){console.log(me.email);API.saveUser({email:me.email,fBaseId:me.uid}).catch(function(err){return console.log(err);});API.getUser(me.uid).then(function(d){_this2.setState({activeUser:d});});_this2.setState({me:me});});}},{key:\"onLogOut\",value:function onLogOut(){window.location=\"/\";}},{key:\"render\",value:function render(){var _this3=this;var me=this.state.me;var email=_.get(me,\"email\");var id=_.get(me,\"uid\");var activeUser=this.state.activeUser;return React.createElement(BrowserRouter,null,React.createElement(Navbar,{bg:\"white\",expand:\"lg\"},React.createElement(Navbar.Brand,{href:\"/\"},\"Pantry\"),React.createElement(Navbar.Toggle,{\"aria-controls\":\"basic-navbar-nav\"}),React.createElement(Navbar.Collapse,{id:\"basic-navbar-nav\"},React.createElement(Nav,{className:\"mr-auto\"},React.createElement(Nav.Link,null,React.createElement(Link,{to:\"/\"},\"Home\")),React.createElement(Nav.Link,null,React.createElement(Link,{to:\"/login\",style:{marginRight:16}},\"Login\")),React.createElement(Nav.Link,null,\" \",React.createElement(Link,{to:\"/profile\"},\"Profile\"))),React.createElement(Button,{variant:\"contained\",onClick:function onClick(){fireAuth.signOut();_this3.onLogOut();}},\"Logout\"))),React.createElement(Switch,null,React.createElement(Route,{path:\"/\",exact:true,render:function render(){return React.createElement(Wrapper,null,React.createElement(Home,null));}}),React.createElement(Route,{path:\"/login\",exact:true,render:function render(_ref){var history=_ref.history;return React.createElement(Wrapper,null,React.createElement(LoginForm,{onSubmit:_this3.handleSignIn(history)}),React.createElement(ButtonToolbar,null,['Sign Up'].map(function(placement){return React.createElement(OverlayTrigger,{trigger:\"click\",key:placement,placement:placement,overlay:React.createElement(Popover,{id:\"popover-positioned-\".concat(placement)},React.createElement(Popover.Title,{as:\"h3\"},\"\".concat(placement)),React.createElement(Popover.Content,null,React.createElement(SignUpForm,{onSubmit:_this3.handleSignUp(history)})))},React.createElement(Button,{variant:\"primary\"},placement));})));}}),React.createElement(Route,{path:\"/profile\",exact:true,render:function render(props){return React.createElement(Wrapper,null,React.createElement(ProtectedProfile,Object.assign({},props,{me:me,displayName:email,id:id,activeUser:activeUser})));}}),\")} /> */}\"));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/ziadeldessouky/Desktop/rutgers/homework/finalproject3/client/src/App.js"],"names":["React","ReactDOM","_","BrowserRouter","Switch","Route","Link","Typography","Home","Profile","LoginForm","Public","fireAuth","withAuthProtection","API","SignUpForm","Modal","Button","ButtonToolbar","Overlay","OverlayTrigger","Popover","Navbar","Nav","Wrapper","props","padding","margin","ProtectedProfile","App","isSomeoneSignedIn","state","activeUser","me","email","id","handleSignIn","history","password","signInWithEmailAndPassword","then","push","handleSignUp","createUserWithEmailAndPassword","catch","error","errorCode","code","errorMessage","message","console","log","currentUser","onAuthStateChanged","saveUser","fBaseId","uid","err","getUser","d","setState","window","location","get","marginRight","signOut","onLogOut","map","placement","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from \"react-dom\";\nimport _ from \"lodash\";\nimport { BrowserRouter, Switch, Route, Link } from \"react-router-dom\";\n\nimport Typography from \"@material-ui/core/Typography\";\nimport './App.css';\nimport Home from './components/Home';\nimport Profile from './components/Profile';\nimport LoginForm from './components/LoginForm';\nimport Public from './components/Public';\nimport { fireAuth } from \"./fireApi\";\nimport withAuthProtection from \"./withAuthProtection\";\nimport API from '../src/utils/API';\nimport SignUpForm from './components/SignUpForm';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\nimport ButtonToolbar from 'react-bootstrap/ButtonToolbar';\nimport Overlay from 'react-bootstrap/Overlay';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Popover from 'react-bootstrap/Popover';\nimport Navbar from 'react-bootstrap/Navbar'\nimport Nav from 'react-bootstrap/Nav'\n\nconst Wrapper = props => (\n  <div style={{  padding: 16, margin: \"auto\" }} {...props} />\n);\n\nconst ProtectedProfile = withAuthProtection(\"/login\")(Profile);\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    console.log(\"user\", fireAuth.currentUser);\n    this.state = {\n      me: fireAuth.currentUser,\n      activeUser: {}\n    };\n  }\n\n  isSomeoneSignedIn=()=>{\n    if(this.state.activeUser){\n      return(\n      <ProtectedProfile {...this.state.props} me={this.state.me} displayName={this.state.email} id={this.state.id} activeUser={this.state.activeUser} />      )\n    }else{\n      return (\n        <ProtectedProfile />    \n      )\n    }\n  }\n\n  componentDidMount() {\n    fireAuth.onAuthStateChanged(me => {\n      console.log(me.email)\n      API.saveUser({email:me.email, fBaseId:me.uid}).catch(err => console.log(err));\n\n\n\n      API.getUser(me.uid).then(d => {\n        this.setState({ activeUser: d })\n        \n      })\n      this.setState({ me });\n    });\n\n  };\n\n\n\n  handleSignIn = history => (email, password) => {\n    return fireAuth.signInWithEmailAndPassword(email, password).then(() => {\n      return history.push(\"/profile\");\n    });\n  };\n  handleSignUp = history => (email, password) => {\n    fireAuth.createUserWithEmailAndPassword(email, password).catch(function (error) {\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      // ...\n    }\n    );\n    return history.push(\"/profile\");\n  };\n\n  onLogOut() {\n    window.location = \"/\"\n  }\n\n  render() {\n    const { me } = this.state;\n    const email = _.get(me, \"email\");\n    const id = _.get(me, \"uid\");\n    const activeUser = this.state.activeUser\n    return (\n      \n      <BrowserRouter>\n\n          <Navbar bg=\"white\" expand=\"lg\">\n          <Navbar.Brand href=\"/\">Pantry</Navbar.Brand>\n          <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n          <Navbar.Collapse id=\"basic-navbar-nav\">\n          <Nav className=\"mr-auto\">\n             <Nav.Link><Link to=\"/\">Home</Link></Nav.Link>\n             <Nav.Link><Link to=\"/login\" style={{ marginRight: 16 }}>Login</Link></Nav.Link>\n             <Nav.Link> <Link to=\"/profile\">Profile</Link></Nav.Link>\n\n\n              </Nav>\n              <Button variant={\"contained\"} onClick={() => { fireAuth.signOut(); this.onLogOut() }} >\n          Logout\n            </Button>\n              </Navbar.Collapse>\n              </Navbar>\n\n\n        <Switch>\n        \n          <Route\n            path=\"/\"\n            exact\n            render={() => (\n              <Wrapper>\n              \n                <Home />\n              </Wrapper>\n            )}\n          />\n          <Route\n            path=\"/login\"\n            exact\n            render={({ history }) => (\n              <Wrapper>\n                \n                <LoginForm onSubmit={this.handleSignIn(history)} />\n\n                <ButtonToolbar>\n                  {['Sign Up'].map(placement => (\n                    <OverlayTrigger\n                      trigger=\"click\"\n                      key={placement}\n                      placement={placement}\n                      overlay={\n                        <Popover id={`popover-positioned-${placement}`}>\n                          <Popover.Title as=\"h3\">{`${placement}`}</Popover.Title>\n                          <Popover.Content>\n                            <SignUpForm onSubmit={this.handleSignUp(history)} />\n                          </Popover.Content>\n                        </Popover>\n                      }\n                    >\n                      <Button variant=\"primary\">{placement}</Button>\n                    </OverlayTrigger>\n                  ))}\n                </ButtonToolbar>\n              </Wrapper>\n            )}\n          />\n          <Route\n            path=\"/profile\"\n            \n            exact\n            render={props => (\n              <Wrapper>\n            \n                <ProtectedProfile {...props} me={me} displayName={email} id={id} activeUser={activeUser} />\n\n              </Wrapper>\n            )}\n          />\n          {/* <Route\n            path=\"/public\"\n            exact\n            render={() => (\n              <Wrapper>\n                {/* <Link to=\"/\">Home</Link> */}\n                {/* <Public />\n              </Wrapper> */}\n            )}\n          /> */}\n        </Switch>\n\n      </BrowserRouter>\n    );\n  }\n}\nexport default App;\n"]},"metadata":{},"sourceType":"module"}
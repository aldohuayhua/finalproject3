{"ast":null,"code":"var _jsxFileName = \"/Users/ziadeldessouky/Desktop/rutgers/homework/finalproject3/client/src/App.js\";\nimport React from 'react';\nimport ReactDOM from \"react-dom\";\nimport _ from \"lodash\";\nimport { BrowserRouter, Switch, Route, Link } from \"react-router-dom\";\nimport Typography from \"@material-ui/core/Typography\";\nimport './App.css';\nimport Home from './components/Home';\nimport Profile from './components/Profile';\nimport LoginForm from './components/LoginForm';\nimport Public from './components/Public';\nimport { fireAuth } from \"./fireApi\";\nimport withAuthProtection from \"./withAuthProtection\";\nimport API from '../src/utils/API';\nimport SignUpForm from './components/SignUpForm';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\nimport ButtonToolbar from 'react-bootstrap/ButtonToolbar';\nimport Overlay from 'react-bootstrap/Overlay';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Popover from 'react-bootstrap/Popover';\nimport Navbar from 'react-bootstrap/Navbar';\nimport Nav from 'react-bootstrap/Nav';\n\nconst Wrapper = props => React.createElement(\"div\", Object.assign({\n  style: {\n    padding: 16,\n    margin: \"auto\"\n  }\n}, props, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 26\n  },\n  __self: this\n}));\n\nconst ProtectedProfile = withAuthProtection(\"/login\")(Profile);\n\nclass App extends React.Component {\n  constructor() {\n    super();\n\n    this.isSomeoneSignedIn = () => {\n      if (this.state.activeUser) {\n        return React.createElement(ProtectedProfile, Object.assign({}, this.state.props, {\n          me: this.state.me,\n          displayName: this.state.email,\n          id: this.state.id,\n          activeUser: this.state.activeUser,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        }));\n      } else {\n        return React.createElement(ProtectedProfile, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        });\n      }\n    };\n\n    this.handleSignIn = history => (email, password) => {\n      return fireAuth.signInWithEmailAndPassword(email, password).then(() => {\n        return history.push(\"/profile\");\n      });\n    };\n\n    this.handleSignUp = history => (email, password) => {\n      fireAuth.createUserWithEmailAndPassword(email, password).catch(function (error) {\n        // Handle Errors here.\n        var errorCode = error.code;\n        var errorMessage = error.message; // ...\n      });\n      return history.push(\"/profile\");\n    };\n\n    console.log(\"user\", fireAuth.currentUser);\n    this.state = {\n      me: fireAuth.currentUser,\n      activeUser: {}\n    };\n  }\n\n  componentDidMount() {\n    fireAuth.onAuthStateChanged(me => {\n      console.log(me.email);\n      API.saveUser({\n        email: me.email,\n        fBaseId: me.uid\n      }).catch(err => console.log(err));\n      API.getUser(me.uid).then(d => {\n        this.setState({\n          activeUser: d\n        });\n      });\n      this.setState({\n        me\n      });\n    });\n  }\n\n  onLogOut() {\n    window.location = \"/\";\n  }\n\n  render() {\n    const {\n      me\n    } = this.state;\n\n    const email = _.get(me, \"email\");\n\n    const id = _.get(me, \"uid\");\n\n    const activeUser = this.state.activeUser;\n    return React.createElement(BrowserRouter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(Navbar, {\n      bg: \"white\",\n      expand: \"lg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(Navbar.Brand, {\n      href: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"Pantry\"), React.createElement(Navbar.Toggle, {\n      \"aria-controls\": \"basic-navbar-nav\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }), React.createElement(Navbar.Collapse, {\n      id: \"basic-navbar-nav\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(Nav, {\n      className: \"mr-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(Nav.Link, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"Home\")), React.createElement(Nav.Link, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/login\",\n      style: {\n        marginRight: 16\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"Login\")), React.createElement(Nav.Link, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \" \", React.createElement(Link, {\n      to: \"/profile\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, \"Profile\"))), React.createElement(Button, {\n      variant: \"contained\",\n      onClick: () => {\n        fireAuth.signOut();\n        this.onLogOut();\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, \"Logout\"))), React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/\",\n      exact: true,\n      render: () => React.createElement(Wrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(Home, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      })),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/login\",\n      exact: true,\n      render: ({\n        history\n      }) => React.createElement(Wrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(LoginForm, {\n        onSubmit: this.handleSignIn(history),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }), React.createElement(ButtonToolbar, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, ['Sign Up'].map(placement => React.createElement(OverlayTrigger, {\n        trigger: \"click\",\n        key: placement,\n        placement: placement,\n        overlay: React.createElement(Popover, {\n          id: `popover-positioned-${placement}`,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, React.createElement(Popover.Title, {\n          as: \"h3\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }, `${placement}`), React.createElement(Popover.Content, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }, React.createElement(SignUpForm, {\n          onSubmit: this.handleSignUp(history),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        }))),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, placement))))),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/profile\",\n      exact: true,\n      render: props => React.createElement(Wrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(ProtectedProfile, Object.assign({}, props, {\n        me: me,\n        displayName: email,\n        id: id,\n        activeUser: activeUser,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }))),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }), \")} /> */}\"));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/ziadeldessouky/Desktop/rutgers/homework/finalproject3/client/src/App.js"],"names":["React","ReactDOM","_","BrowserRouter","Switch","Route","Link","Typography","Home","Profile","LoginForm","Public","fireAuth","withAuthProtection","API","SignUpForm","Modal","Button","ButtonToolbar","Overlay","OverlayTrigger","Popover","Navbar","Nav","Wrapper","props","padding","margin","ProtectedProfile","App","Component","constructor","isSomeoneSignedIn","state","activeUser","me","email","id","handleSignIn","history","password","signInWithEmailAndPassword","then","push","handleSignUp","createUserWithEmailAndPassword","catch","error","errorCode","code","errorMessage","message","console","log","currentUser","componentDidMount","onAuthStateChanged","saveUser","fBaseId","uid","err","getUser","d","setState","onLogOut","window","location","render","get","marginRight","signOut","map","placement"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from \"react-dom\";\nimport _ from \"lodash\";\nimport { BrowserRouter, Switch, Route, Link } from \"react-router-dom\";\n\nimport Typography from \"@material-ui/core/Typography\";\nimport './App.css';\nimport Home from './components/Home';\nimport Profile from './components/Profile';\nimport LoginForm from './components/LoginForm';\nimport Public from './components/Public';\nimport { fireAuth } from \"./fireApi\";\nimport withAuthProtection from \"./withAuthProtection\";\nimport API from '../src/utils/API';\nimport SignUpForm from './components/SignUpForm';\nimport Modal from 'react-bootstrap/Modal';\nimport Button from 'react-bootstrap/Button';\nimport ButtonToolbar from 'react-bootstrap/ButtonToolbar';\nimport Overlay from 'react-bootstrap/Overlay';\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\nimport Popover from 'react-bootstrap/Popover';\nimport Navbar from 'react-bootstrap/Navbar'\nimport Nav from 'react-bootstrap/Nav'\n\nconst Wrapper = props => (\n  <div style={{  padding: 16, margin: \"auto\" }} {...props} />\n);\n\nconst ProtectedProfile = withAuthProtection(\"/login\")(Profile);\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    console.log(\"user\", fireAuth.currentUser);\n    this.state = {\n      me: fireAuth.currentUser,\n      activeUser: {}\n    };\n  }\n\n  isSomeoneSignedIn=()=>{\n    if(this.state.activeUser){\n      return(\n      <ProtectedProfile {...this.state.props} me={this.state.me} displayName={this.state.email} id={this.state.id} activeUser={this.state.activeUser} />      )\n    }else{\n      return (\n        <ProtectedProfile />    \n      )\n    }\n  }\n\n  componentDidMount() {\n    fireAuth.onAuthStateChanged(me => {\n      console.log(me.email)\n      API.saveUser({email:me.email, fBaseId:me.uid}).catch(err => console.log(err));\n\n\n\n      API.getUser(me.uid).then(d => {\n        this.setState({ activeUser: d })\n        \n      })\n      this.setState({ me });\n    });\n\n  };\n\n\n\n  handleSignIn = history => (email, password) => {\n    return fireAuth.signInWithEmailAndPassword(email, password).then(() => {\n      return history.push(\"/profile\");\n    });\n  };\n  handleSignUp = history => (email, password) => {\n    fireAuth.createUserWithEmailAndPassword(email, password).catch(function (error) {\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      // ...\n    }\n    );\n    return history.push(\"/profile\");\n  };\n\n  onLogOut() {\n    window.location = \"/\"\n  }\n\n  render() {\n    const { me } = this.state;\n    const email = _.get(me, \"email\");\n    const id = _.get(me, \"uid\");\n    const activeUser = this.state.activeUser\n    return (\n      \n      <BrowserRouter>\n\n          <Navbar bg=\"white\" expand=\"lg\">\n          <Navbar.Brand href=\"/\">Pantry</Navbar.Brand>\n          <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n          <Navbar.Collapse id=\"basic-navbar-nav\">\n          <Nav className=\"mr-auto\">\n             <Nav.Link><Link to=\"/\">Home</Link></Nav.Link>\n             <Nav.Link><Link to=\"/login\" style={{ marginRight: 16 }}>Login</Link></Nav.Link>\n             <Nav.Link> <Link to=\"/profile\">Profile</Link></Nav.Link>\n\n\n              </Nav>\n              <Button variant={\"contained\"} onClick={() => { fireAuth.signOut(); this.onLogOut() }} >\n          Logout\n            </Button>\n              </Navbar.Collapse>\n              </Navbar>\n\n\n        <Switch>\n        \n          <Route\n            path=\"/\"\n            exact\n            render={() => (\n              <Wrapper>\n              \n                <Home />\n              </Wrapper>\n            )}\n          />\n          <Route\n            path=\"/login\"\n            exact\n            render={({ history }) => (\n              <Wrapper>\n                \n                <LoginForm onSubmit={this.handleSignIn(history)} />\n\n                <ButtonToolbar>\n                  {['Sign Up'].map(placement => (\n                    <OverlayTrigger\n                      trigger=\"click\"\n                      key={placement}\n                      placement={placement}\n                      overlay={\n                        <Popover id={`popover-positioned-${placement}`}>\n                          <Popover.Title as=\"h3\">{`${placement}`}</Popover.Title>\n                          <Popover.Content>\n                            <SignUpForm onSubmit={this.handleSignUp(history)} />\n                          </Popover.Content>\n                        </Popover>\n                      }\n                    >\n                      <Button variant=\"primary\">{placement}</Button>\n                    </OverlayTrigger>\n                  ))}\n                </ButtonToolbar>\n              </Wrapper>\n            )}\n          />\n          <Route\n            path=\"/profile\"\n            \n            exact\n            render={props => (\n              <Wrapper>\n            \n                <ProtectedProfile {...props} me={me} displayName={email} id={id} activeUser={activeUser} />\n\n              </Wrapper>\n            )}\n          />\n          {/* <Route\n            path=\"/public\"\n            exact\n            render={() => (\n              <Wrapper>\n                {/* <Link to=\"/\">Home</Link> */}\n                {/* <Public />\n              </Wrapper> */}\n            )}\n          /> */}\n        </Switch>\n\n      </BrowserRouter>\n    );\n  }\n}\nexport default App;\n"]},"metadata":{},"sourceType":"module"}